<!-- Page 3 -->
<div class="row">

  <div class="write-message whitebox col-md-10">
    <button class="btn-sm btn-warning back-button" ng-click="dioPageNav.back()">Go back</button>
    
    <div id="loading" class="whitebox" ng-if="!loadingDelay && !legislatorsFormElements">
      <svg  version="1.1" 
            id="loading-svg" 
            xmlns="http://www.w3.org/2000/svg" 
            xmlns:xlink="http://www.w3.org/1999/xlink" 
            x="0px" 
            y="0px"
            width="40px" 
            height="40px" 
            viewBox="0 0 40 40" 
            enable-background="new 0 0 40 40" 
            xml:space="preserve">
        <path opacity="0.2" fill="#FF8901" d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946
          s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634
          c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"/>
        <path fill="#EE335B" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0
          C22.32,8.481,24.301,9.057,26.013,10.047z">
          <animateTransform attributeType="xml"
            attributeName="transform"
            type="rotate"
            from="0 20 20"
            to="360 20 20"
            dur="0.5s"
            repeatCount="indefinite"/>
        </path>
      </svg>
      <p>This'll just take one moment ...</p>
    </div>

    <div ng-show="submitted">
      CAPTCHA!
    </div>

    <form name="messageForm" class="whitebox-container" ng-show="legislatorsFormElements && !submitted">

      <div class="row">
        <div class="col-md-12" id="to-field">
          <label>This message will be sent to:</label>
            <span ng-repeat="legislator in legislators">
              <span>
                [[legislator.title]]. [[legislator.firstName]] [[legislator.lastName]]
              <span ng-hide="$last">,</span>
            </span>
          </span>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-sm-8 col-md-9">
          <label for="inputSubject">Subject</label>
          <input type="text" class="form-control" id="inputSubject" ng-model="formData.subject" required>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-sm-8 col-md-9">
        <label for="inputMessage">Message</label>
        <div id="textarea-container">
          <textarea form="messageForm" id="inputMessage" class="form-control" cols="30" rows="10" ng-model="formData.message" required></textarea>
        </div>
        </div>
        <div class="col-sm-4 col-md-3 hidden-xs">
          <div class="panel">
            <div class="panel-heading">
              GUIDELINES:
            </div>
            <div class="panel-body">
                <p>Be <strong>polite</strong> and concise.</p>
                <p>Explain why the issue you're writing about is important to you.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4 col-md-3 form-group">
          <label for="inputFirstName">First name</label>
          <input type="text" class="form-control" id="inputFirstName" ng-model="formData.firstName" required>
        </div>

        <div class="col-sm-4 col-md-3 form-group">
          <label for="inputLastName">Last name</label>
          <input type="text" class="form-control" id="inputLastName" ng-model="formData.lastName" required>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4 col-md-3 form-group">
          <label for="inputPrefix">Prefix</label>
          <select form="messageForm" class="form-control" id="inputPrefix" ng-model="formData.prefix" required>
            <option value="Mr">Mr</option>
            <option value="Ms">Ms</option>
            <option value="Mrs">Mrs</option>
            <option value="Dr">Dr</option>
          </select>
        </div>

        <div class="col-sm-4 col-md-3 form-group">
          <label for="inputPhoneNumber">Phone number</label>
          <input type="text" class="form-control" id="inputPhoneNumber" ng-model="formData.phoneNumber" required>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-sm-4 col-md-6">
          <label for="inputTopic">Topic</label>
          <select form="messageForm" class="form-control" id="inputTopic" ng-model="formData.topic" required>
            <option ng-repeat="topic in topics" value="[[topic]]">[[topic]]</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 form-group">
          <label for="inputEmail">Email Address</label>
          <input type="email" class="form-control" id="inputEmail" ng-model="formData.email" required>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-md-12 checkbox emailSignup" >
          <p>Democracy.io is a free service provided by the <a href="https://eff.org">Electronic Frontier Foundation</a>, a 501(c)(3) non-profit dedicated to fighting for your rights in the digital age.</p>
          <input type="checkbox" id="emailSignup" model="joinEmailList" unchecked> 
          <label for="emailSignup">Want to stay up to date with the EFF and our work? Check this box to sign up for email updates (<a href="https://www.eff.org/policy">privacy policy</a>).</label>
        </div>
      </div>

      <button type="submit"
              class="btn btn-orange btn-lg"
              ng-click="send()"
              ng-disabled="messageFrom.$invalid">
        Send!
      </button>
    </form>
  </div>
</div>
